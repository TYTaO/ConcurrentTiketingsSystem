# 性能评测报告

### 设计思路
所需要实现的TicketingSystem的三个方法都是操作车票：买票，查票，退票。而操作车票其对应的其实就是对座位状态的
修改，因此每个座位就是我们需要共享的变量，所以把定义座位Seat状态修改的方法，使用这些方法前都需要加锁，锁是属于
每个Seat对象的。Seat对象还包含一个区间属性对应该座位每个区间的售票情况。我实现的加锁的粒度为对一个座位Seat
状态修改时加锁，将这些属性与方法都封装在Seat对象中。

在TicketingDS中，首先初始化变量，使用AtomicLong类生成唯一Tid号，使用ConcurrentHashMap类来存储之后售出的
车票，然后创建各个车次，各个车厢的所有座位。在之后的buyTicket，inquiry，refundTicket方法中均采用遍历的方式
对每个座位进行操作，每个操作都是调用Seat对象的方法。

在Seat中使用的是StampedLock锁，StampedLock 支持三种模式，分别是：写锁、悲观读锁和乐观读。在查询Seat状态时
先使用乐观读方法（无锁），之后检测一次。